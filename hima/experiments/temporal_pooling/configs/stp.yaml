_type_: stp.synthetic_sequences
project: stp.fast_weights
log: True    # wandb logging, use 'dry' for dummy do-nothing logging to test metrics collection

seed: 42
iterate:
  epochs: 5
  sequences: [5, 2]
  elements: 20

data:
  _base_: $_base.dataset.synthetic_sequences.general
  alphabet_size: 200
  encoder:
    _base_: $_base.encoder.random.fixed_sds
    sds: [500, 10]

generator:
  synthetic_general_sequences:
    _base_: $_base.generator.synthetic_sequences.general
    n_elements: 40
    element_encoder: random
    n_sequences: 8
    sequence_length: 40

iterate_setups:
  base:
    _type_:
  simple:
    n_sequences: 5
#    n_sequences: 2
    steps_per_sequence: 20
#    steps_per_sequence: 3
    sequence_repeats: 2
    item_repeats: 1
#    epochs: 2
    epochs: 5
    # FIXME: to ???
    total_repeats: ...
    log_repeat_schedule: 3
    log_epoch_schedule: 2

  full:
    n_sequences: 10
    steps_per_sequence: 30
    sequence_repeats: 10
    item_repeats: 1
    epochs: 10
    total_repeats: ...
    log_repeat_schedule: 5
    log_epoch_schedule: 2

  repeating_one:
    n_sequences: 10
    steps_per_sequence: 1
    sequence_repeats: 1
    item_repeats: 7
    epochs: 10
    total_repeats: ...
    log_repeat_schedule: 5
    log_epoch_schedule: 10

log_schedule:
  log_repeat_schedule: 3
  log_epoch_schedule: 2

pipeline:
  - ___.input -> gen.output
  - ???.output -> ___.output

blocks:
  ___:
    _type_: storage
    in_out: True
    input_sds: ???
  gen:
    _type_: storage
